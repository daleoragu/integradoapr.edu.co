{% load static %}
{% load nota_filters %}

<header class="topbar">
    
    <a href="{% url 'dashboard' %}" class="home-link" title="Ir a la página de Inicio">
        <i class="fas fa-home"></i>
    </a>

    <div class="page-title"><h1>{% block page_title %}{% endblock %}</h1></div>
    <div class="user-info">
        
        <div class="notification-bell">
            <i class="fas fa-bell" id="notification-icon"></i>
            <span class="badge" id="notification-badge" style="display: none;">0</span>
            <div id="notificaciones-dropdown" class="notificaciones-dropdown">
                <div class="dropdown-header">
                    <strong>Notificaciones</strong>
                </div>
                <ul id="notificaciones-lista">
                    <li class="no-notificaciones"><p>Cargando...</p></li>
                </ul>
                <div class="dropdown-footer">
                    <a href="{% url 'lista_notificaciones' %}">Ver todas</a>
                </div>
            </div>
        </div>

        <div class="user-details">
            <strong>{{ user.get_full_name|default:user.username }}</strong>
            {% if user.is_superuser %}<span>Superusuario</span>
            {% elif user|has_group:"Docentes" %}<span>Docente</span>
            {% elif user|has_group:"Estudiantes" %}<span>Estudiante</span>
            {% else %}<span>Usuario</span>
            {% endif %}
        </div>
        
        {% if user.estudiante.fichaestudiante.foto %}
            <img src="{{ user.estudiante.fichaestudiante.foto.url }}" alt="Foto de Perfil" class="user-photo">
        {% else %}
            <img src="https://placehold.co/100x100/eeeeee/333333?text={{ user|get_initials }}" alt="Foto de Perfil" class="user-photo">
        {% endif %}

        <a href="{% url 'logout' %}" class="logout-link">Salir</a>
    </div>
</header>

{# Estilo simple para el nuevo botón de inicio. Puedes moverlo a tu archivo CSS principal si lo prefieres. #}
<style>
    .topbar .home-link {
        font-size: 1.5rem;
        color: white;
        text-decoration: none;
        margin-left: 15px;
        margin-right: 15px;
        transition: color 0.2s;
    }
    .topbar .home-link:hover {
        color: #d4d4d4;
    }
</style>
